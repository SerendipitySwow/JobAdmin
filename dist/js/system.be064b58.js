(window.webpackJsonp=window.webpackJsonp||[]).push([["system"],{7424:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),c=Object(o.createTextVNode)("清除缓存"),r={class:"el-form-item-msg"},a=Object(o.createTextVNode)("保 存"),l=Object(o.createTextVNode)("新增配置"),i={key:1},u={key:1},s={key:1},d={key:1},m=Object(o.createTextVNode)("删除");var b=n("1da1"),f=(n("96cf"),n("d81d"),n("a434"),{name:"system",data:function(){return{systemConfig:[],extendConfig:[],uploadMode:[],systemForm:{},extendForm:{}}},created:function(){this.getSystemConfig(),this.getExtendConfig(),this.getDictData()},methods:{getSystemConfig:function(){var e=this;return Object(b.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.config.getSystemConfig().then((function(t){e.systemConfig=t.data,e.systemConfig.map((function(t){e.systemForm[t.key]=t.value}))}));case 2:case"end":return t.stop()}}),t)})))()},getExtendConfig:function(){var e=this;return Object(b.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.config.getExtendConfig().then((function(t){e.extendConfig=t.data}));case 2:case"end":return t.stop()}}),t)})))()},getDictData:function(){var e=this;return Object(b.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDict("upload_mode").then((function(t){e.uploadMode=t.data}));case 2:case"end":return t.stop()}}),t)})))()},saveSystemConfig:function(){var e=this;this.$API.config.saveSystemConfig(this.systemForm).then((function(t){t.success&&e.$message.success(t.message)}))},clearCache:function(){var e=this;this.$API.config.clearCache().then((function(){e.$message.success("缓存已清除")}))},add:function(){this.extendConfig.push({key:"",value:"",name:"",remark:"",isVirtual:!0,isSet:!0})},save:function(e){var t=this;console.log(e.isSet),e.isSet?(e.isSet=!1,e.isEdit?this.$API.config.update(e).then((function(e){t.$message.success(e.message),t.getExtendConfig()})):(e.group_name="extend",this.$API.config.save(e).then((function(e){t.$message.success(e.message),t.getExtendConfig()})))):(e.isSet=!0,e.isEdit=!0)},del:function(e,t){var n=this;e.isVirtual?this.extendConfig.splice(t,1):this.$API.config.delete(e.key).then((function(e){n.$message.success(e.message),n.getExtendConfig()}))}}}),p=n("6b0d");const j=n.n(p)()(f,[["render",function(e,t,n,b,f,p){var j=Object(o.resolveComponent)("el-button"),O=Object(o.resolveComponent)("el-input"),k=Object(o.resolveComponent)("el-option"),h=Object(o.resolveComponent)("el-select"),g=Object(o.resolveComponent)("el-form-item"),y=Object(o.resolveComponent)("el-form"),C=Object(o.resolveComponent)("el-tab-pane"),w=Object(o.resolveComponent)("el-alert"),x=Object(o.resolveComponent)("el-table-column"),V=Object(o.resolveComponent)("el-popconfirm"),v=Object(o.resolveComponent)("el-table"),B=Object(o.resolveComponent)("el-tabs"),N=Object(o.resolveComponent)("el-card"),_=Object(o.resolveComponent)("el-main");return Object(o.openBlock)(),Object(o.createBlock)(_,null,{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(N,{shadow:"never"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(j,{type:"success",plain:"",onClick:p.clearCache,icon:"el-icon-delete"},{default:Object(o.withCtx)((function(){return[c]})),_:1},8,["onClick"]),Object(o.createVNode)(B,{"tab-position":"top"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(C,{label:"系统组配置"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(y,{ref:"systemForm",model:f.systemForm,"label-width":"100px",style:{"margin-top":"20px",width:"600px"}},{default:Object(o.withCtx)((function(){return[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(f.systemConfig,(function(e,t){return Object(o.openBlock)(),Object(o.createBlock)(g,{label:e.name,prop:e.key,key:t},{default:Object(o.withCtx)((function(){return["site_storage_mode"!==e.key?(Object(o.openBlock)(),Object(o.createBlock)(O,{key:0,modelValue:f.systemForm[e.key],"onUpdate:modelValue":function(t){return f.systemForm[e.key]=t},type:"site_desc"==e.key||"site_copyright"==e.key?"textarea":"text",rows:3,maxlength:"255","show-word-limit":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","type"])):(Object(o.openBlock)(),Object(o.createBlock)(h,{key:1,modelValue:f.systemForm[e.key],"onUpdate:modelValue":function(t){return f.systemForm[e.key]=t},style:{width:"100%"}},{default:Object(o.withCtx)((function(){return[(Object(o.openBlock)(!0),Object(o.createElementBlock)(o.Fragment,null,Object(o.renderList)(f.uploadMode,(function(e,t){return Object(o.openBlock)(),Object(o.createBlock)(k,{key:t,value:e.value,label:e.label},null,8,["value","label"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])),Object(o.createElementVNode)("div",r,Object(o.toDisplayString)(e.remark),1)]})),_:2},1032,["label","prop"])})),128)),Object(o.createVNode)(g,null,{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(j,{type:"primary",onClick:p.saveSystemConfig},{default:Object(o.withCtx)((function(){return[a]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]})),_:1}),Object(o.createVNode)(C,{label:"扩展组配置"},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(w,{title:"扩展配置为系统业务所有的配置，应该由系统管理员操作，如需用户配置应另起业务配置页面。",type:"warning",style:{"margin-bottom":"15px"}}),Object(o.createVNode)(j,{type:"primary",icon:"el-icon-plus",onClick:p.add},{default:Object(o.withCtx)((function(){return[l]})),_:1},8,["onClick"]),Object(o.createVNode)(v,{data:f.extendConfig,stripe:""},{default:Object(o.withCtx)((function(){return[Object(o.createVNode)(x,{label:"#",type:"index",width:"50"}),Object(o.createVNode)(x,{label:"配置Key",prop:"key",width:"150"},{default:Object(o.withCtx)((function(e){return[e.row.isSet?(Object(o.openBlock)(),Object(o.createBlock)(O,{key:0,modelValue:e.row.key,"onUpdate:modelValue":function(t){return e.row.key=t},placeholder:"请输入配置Key"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o.openBlock)(),Object(o.createElementBlock)("span",i,Object(o.toDisplayString)(e.row.key),1))]})),_:1}),Object(o.createVNode)(x,{label:"配置Value",prop:"value",width:"350"},{default:Object(o.withCtx)((function(e){return[e.row.isSet?(Object(o.openBlock)(),Object(o.createBlock)(O,{key:0,modelValue:e.row.value,"onUpdate:modelValue":function(t){return e.row.value=t},placeholder:"请输入配置Value"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o.openBlock)(),Object(o.createElementBlock)("span",u,Object(o.toDisplayString)(e.row.value),1))]})),_:1}),Object(o.createVNode)(x,{label:"配置名称",prop:"name",width:"350"},{default:Object(o.withCtx)((function(e){return[e.row.isSet?(Object(o.openBlock)(),Object(o.createBlock)(O,{key:0,modelValue:e.row.name,"onUpdate:modelValue":function(t){return e.row.name=t},placeholder:"请输入配置名称"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o.openBlock)(),Object(o.createElementBlock)("span",s,Object(o.toDisplayString)(e.row.name),1))]})),_:1}),Object(o.createVNode)(x,{label:"备注说明",prop:"remark",width:"150"},{default:Object(o.withCtx)((function(e){return[e.row.isSet?(Object(o.openBlock)(),Object(o.createBlock)(O,{key:0,modelValue:e.row.remark,"onUpdate:modelValue":function(t){return e.row.remark=t},placeholder:"请输入备注说明"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o.openBlock)(),Object(o.createElementBlock)("span",d,Object(o.toDisplayString)(e.row.remark),1))]})),_:1}),Object(o.createVNode)(x,{"min-width":"1"}),Object(o.createVNode)(x,{label:"操作",fixed:"right",width:"100"},{default:Object(o.withCtx)((function(e){return[Object(o.createVNode)(j,{onClick:function(t){return p.save(e.row,e.$index)},type:"text",size:"small"},{default:Object(o.withCtx)((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.row.isSet?"保存":"修改"),1)]})),_:2},1032,["onClick"]),Object(o.createVNode)(V,{title:"确定删除吗？",onConfirm:function(t){return p.del(e.row,e.$index)}},{reference:Object(o.withCtx)((function(){return[Object(o.createVNode)(j,{type:"text",size:"small"},{default:Object(o.withCtx)((function(){return[m]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}]]);t.default=j}}]);