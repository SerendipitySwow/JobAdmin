(window.webpackJsonp=window.webpackJsonp||[]).push([["system-user-save"],{"38c1":function(e,t,r){"use strict";r("8e94")},"8e94":function(e,t,r){},ee82:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),o=function(e){return Object(n.pushScopeId)("data-v-00f8e0f8"),e=e(),Object(n.popScopeId)(),e}((function(){return Object(n.createElementVNode)("i",{class:"el-icon-s-custom",style:{"font-size":"96px"}},null,-1)})),a=Object(n.createTextVNode)("取 消"),c=Object(n.createTextVNode)("保 存");var l=r("1da1"),u=(r("d81d"),r("96cf"),{emits:["success","closed"],data:function(){return{mode:"add",loading:!1,titleMap:{add:"新增用户",edit:"编辑用户",show:"查看"},deptTree:[],postData:[],roleData:[],visible:!1,isSaveing:!1,form:{id:null,avatar:"",username:"",nickname:"",phone:"",password:"123456",dept_id:null,role_ids:"",post_ids:"",email:"",status:"0",remark:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],role_ids:[{required:!0,message:"请选择角色",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:["blur"]}]}}},mounted:function(){this.initData()},methods:{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return this.mode=e,this.visible=!0,this},submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=16;break}if(e.isSaveing=!0,n=null,"add"!=e.mode){t.next=9;break}return t.next=6,e.$API.user.save(e.form);case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,e.$API.user.update(e.form.id,e.form);case 11:n=t.sent;case 12:e.isSaveing=!1,n.success?(e.$emit("success",e.form,e.mode),e.visible=!1,e.$message.success(n.message)):e.$alert(n.message,"提示",{type:"error"}),t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleResource:function(e){this.form.avatar=this.viewImage(e.pop().url)},initData:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.dept.tree().then((function(t){e.deptTree=t.data}));case 2:return t.next=4,e.$API.role.getList().then((function(t){e.roleData=t.data}));case 4:return t.next=6,e.$API.post.getList().then((function(t){e.postData=t.data}));case 6:case"end":return t.stop()}}),t)})))()},setData:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,t.form.id=e.id,t.form.avatar=e.avatar,t.form.username=e.username,t.form.nickname=e.nickname,t.form.phone=e.phone,t.form.dept_id=e.dept_id,t.form.post_ids=e.post_ids,t.form.role_ids=e.role_ids,t.form.email=e.email,t.form.status=e.status,t.form.remark=e.remark,r.next=14,t.$API.user.read(e.id).then((function(e){t.form.role_ids=e.data.roleList.map((function(e){return e.id})),t.form.post_ids=e.data.postList.map((function(e){return e.id}))}));case 14:t.loading=!1;case 15:case"end":return r.stop()}}),r)})))()}}}),i=(r("38c1"),r("6b0d"));const d=r.n(i)()(u,[["render",function(e,t,r,l,u,i){var d=Object(n.resolveComponent)("el-avatar"),s=Object(n.resolveComponent)("ma-resource-select"),m=Object(n.resolveComponent)("el-form-item"),f=Object(n.resolveComponent)("el-col"),b=Object(n.resolveComponent)("el-row"),p=Object(n.resolveComponent)("el-input"),j=Object(n.resolveComponent)("el-cascader"),O=Object(n.resolveComponent)("el-option"),h=Object(n.resolveComponent)("el-select"),V=Object(n.resolveComponent)("el-form"),w=Object(n.resolveComponent)("el-button"),g=Object(n.resolveComponent)("el-dialog"),v=Object(n.resolveDirective)("loading");return Object(n.openBlock)(),Object(n.createBlock)(g,{title:u.titleMap[u.mode],modelValue:u.visible,"onUpdate:modelValue":t[12]||(t[12]=function(e){return u.visible=e}),width:800,"destroy-on-close":"",onClosed:t[13]||(t[13]=function(t){return e.$emit("closed")})},{footer:Object(n.withCtx)((function(){return[Object(n.createVNode)(w,{onClick:t[10]||(t[10]=function(e){return u.visible=!1})},{default:Object(n.withCtx)((function(){return[a]})),_:1}),"show"!=u.mode?(Object(n.openBlock)(),Object(n.createBlock)(w,{key:0,type:"primary",loading:u.isSaveing,onClick:t[11]||(t[11]=function(e){return i.submit()})},{default:Object(n.withCtx)((function(){return[c]})),_:1},8,["loading"])):Object(n.createCommentVNode)("",!0)]})),default:Object(n.withCtx)((function(){return[Object(n.withDirectives)(Object(n.createVNode)(V,{model:u.form,rules:u.rules,disabled:"show"==u.mode,ref:"dialogForm","label-width":"80px","label-position":"right","element-loading-background":"rgba(255, 255, 255, 0.8)","element-loading-text":"数据加载中..."},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{gutter:20},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{span:24},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"头像",prop:"avatar"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(d,{class:"avatar",shape:"square",size:96,src:u.form.avatar,onError:t[0]||(t[0]=function(){return!0})},{default:Object(n.withCtx)((function(){return[o]})),_:1},8,["src"]),Object(n.createVNode)(s,{style:{padding:"0"},resource:!0,onUploadData:i.handleResource},null,8,["onUploadData"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(b,{gutter:20},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"用户名",prop:"username"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:u.form.username,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.form.username=e}),placeholder:"用于登录系统",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"部门",prop:"dept_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(j,{modelValue:u.form.dept_id,"onUpdate:modelValue":t[2]||(t[2]=function(e){return u.form.dept_id=e}),clearable:"",style:{width:"100%"},placeholder:"请选择部门",options:u.deptTree,props:{checkStrictly:!0}},null,8,["modelValue","options"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(b,{gutter:20},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"登录密码",prop:"password"},{default:Object(n.withCtx)((function(){return["add"==u.mode?(Object(n.openBlock)(),Object(n.createBlock)(p,{key:0,type:"password",modelValue:u.form.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return u.form.password=e}),clearable:"","show-password":""},null,8,["modelValue"])):(Object(n.openBlock)(),Object(n.createBlock)(p,{key:1,placeholder:"密码不可修改",disabled:!0}))]})),_:1})]})),_:1}),Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"昵称",prop:"nickname"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:u.form.nickname,"onUpdate:modelValue":t[4]||(t[4]=function(e){return u.form.nickname=e}),placeholder:"用户昵称",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(b,{gutter:20},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"角色",prop:"role_ids"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(h,{modelValue:u.form.role_ids,"onUpdate:modelValue":t[5]||(t[5]=function(e){return u.form.role_ids=e}),clearable:"",style:{width:"100%"},multiple:"",placeholder:"请选择用户角色"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(u.roleData,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(O,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"邮箱",prop:"email"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:u.form.email,"onUpdate:modelValue":t[6]||(t[6]=function(e){return u.form.email=e}),placeholder:"请输入电子邮箱",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(b,{gutter:20},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"岗位",prop:"post_ids"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(h,{modelValue:u.form.post_ids,"onUpdate:modelValue":t[7]||(t[7]=function(e){return u.form.post_ids=e}),clearable:"",style:{width:"100%"},multiple:"",placeholder:"用户岗位"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(u.postData,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(O,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(n.createVNode)(f,{span:12},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"手机 ",prop:"phone"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:u.form.phone,"onUpdate:modelValue":t[8]||(t[8]=function(e){return u.form.phone=e}),placeholder:"请输入手机"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n.createVNode)(b,{gutter:20},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{span:24},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"备注",prop:"remark"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{type:"textarea",rows:3,placeholder:"用户备注信息",modelValue:u.form.remark,"onUpdate:modelValue":t[9]||(t[9]=function(e){return u.form.remark=e}),maxlength:"255","show-word-limit":""},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model","rules","disabled"]),[[v,u.loading]])]})),_:1},8,["title","modelValue"])}],["__scopeId","data-v-00f8e0f8"]]);t.default=d}}]);