(window.webpackJsonp=window.webpackJsonp||[]).push([["system-app-save","chunk-2d0ced70"],{"60bb":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"sceditor"};var o=r("1da1"),c=(r("96cf"),r("a9e3"),r("365c")),i=r("ca72"),l=r("e562"),u=r.n(l),s=(r("0d68"),r("ec27"),r("64d8"),r("4ea8"),r("4237"),r("0a9d"),r("07d1"),{components:{Editor:i.a},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code image link preview table"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link | formatselect fontselect fontsizeselect | \t\t\t\t\talignleft aligncenter alignright alignjustify outdent indent lineheight | bullist numlist | \t\t\t\t\timage table  preview | code selectall"}},data:function(){return{init:{language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",content_css:"tinymce/skins/content/default/content.css",menubar:!1,statusbar:!0,plugins:this.plugins,toolbar:this.toolbar,fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",height:this.height,placeholder:this.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",images_upload_handler:(e=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",t.blob(),t.filename()),e.prev=2,e.next=5,c.a.upload.uploadImage(a);case 5:o=e.sent,r(o.data.url),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n("图片上传失败");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(t,r,n){return e.apply(this,arguments)}),setup:function(e){e.on("init",(function(){this.getBody().style.fontSize="14px"}))}},contentValue:this.modelValue};var e},watch:{modelValue:function(e){this.contentValue=e},contentValue:function(e){this.$emit("update:modelValue",e)}},mounted:function(){u.a.init({})},methods:{onClick:function(e){this.$emit("onClick",e,u.a)}}}),d=r("6b0d");const p=r.n(d)()(s,[["render",function(e,t,r,o,c,i){var l=Object(n.resolveComponent)("Editor");return Object(n.openBlock)(),Object(n.createElementBlock)("div",a,[Object(n.createVNode)(l,{modelValue:c.contentValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.contentValue=e}),init:c.init,disabled:r.disabled,placeholder:r.placeholder,onOnClick:i.onClick},null,8,["modelValue","init","disabled","placeholder","onOnClick"])])}]]);t.default=p},f45a:function(e,t,r){"use strict";r.r(t);r("b0c0"),r("a4d3"),r("e01a");var n=r("7a23"),a=Object(n.createTextVNode)("刷新APP ID"),o=Object(n.createTextVNode)("刷新APP SECRET"),c=Object(n.createTextVNode)("取 消"),i=Object(n.createTextVNode)("保 存");var l=r("1da1"),u=(r("96cf"),{emits:["success","closed"],components:{editor:r("60bb").default},data:function(){return{mode:"add",activeName:"base",titleMap:{add:"新增应用",edit:"编辑应用"},form:{id:"",group_id:"",app_name:"",app_id:"",app_secret:"",status:"0",description:"",remark:""},rules:{group_id:[{required:!0,message:"应用分组必填",trigger:"blur"}],app_name:[{required:!0,message:"应用名称必填",trigger:"blur"}],app_id:[{required:!0,message:"APP ID必填",trigger:"blur"}],app_secret:[{required:!0,message:"APP SECRET必填",trigger:"blur"}]},visible:!1,isSaveing:!1,data_status_data:[],groupData:[]}},methods:{open:function(){var e=arguments,t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"add",r.next=3,t.getDictData();case 3:return r.next=5,t.getGroupData();case 5:return t.mode=n,t.visible=!0,"add"===n&&(t.setAppid(),t.setAppsecret()),r.abrupt("return",t);case 9:case"end":return r.stop()}}),r)})))()},setAppid:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.app.getAppId();case 2:r=t.sent,e.form.app_id=r.data.app_id;case 4:case"end":return t.stop()}}),t)})))()},setAppsecret:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("add"!==e.mode){t.next=7;break}return t.next=3,e.$API.app.getAppSecret();case 3:r=t.sent,e.form.app_secret=r.data.app_secret,t.next=8;break;case 7:e.$prompt('若要继续,请在下方输入"yes"',"警告!该操作会导致已经在运行中的应用失效",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/yes/,inputErrorMessage:"输入有误"}).then(Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$API.app.getAppSecret();case 2:r=t.sent,e.form.app_secret=r.data.app_secret,e.$message.success('appSecret重置成功,请点击下方"保存"按钮使其生效');case 5:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=14;break}if(e.isSaveing=!0,n=null,"add"!=e.mode){t.next=9;break}return t.next=6,e.$API.app.save(e.form);case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,e.$API.app.update(e.form.id,e.form);case 11:n=t.sent;case 12:e.isSaveing=!1,n.success?(e.$emit("success",e.form,e.mode),e.visible=!1,e.$message.success(n.message)):e.$alert(n.message,"提示",{type:"error"});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},setData:function(e){this.form.id=e.id,this.form.group_id=e.group_id,this.form.app_name=e.app_name,this.form.app_id=e.app_id,this.form.app_secret=e.app_secret,this.form.status=e.status,this.form.description=e.description,this.form.remark=e.remark},getDictData:function(){var e=this;this.getDict("data_status").then((function(t){e.data_status_data=t.data}))},getGroupData:function(){var e=this;this.$API.appGroup.getSelectList().then((function(t){t.success&&(e.groupData=t.data)}))}}}),s=r("6b0d");const d=r.n(s)()(u,[["render",function(e,t,r,l,u,s){var d=Object(n.resolveComponent)("el-option"),p=Object(n.resolveComponent)("el-select"),m=Object(n.resolveComponent)("el-form-item"),f=Object(n.resolveComponent)("el-input"),b=Object(n.resolveComponent)("el-button"),h=Object(n.resolveComponent)("el-radio"),g=Object(n.resolveComponent)("el-radio-group"),j=Object(n.resolveComponent)("el-tab-pane"),O=Object(n.resolveComponent)("editor"),_=Object(n.resolveComponent)("el-tabs"),V=Object(n.resolveComponent)("el-form"),x=Object(n.resolveComponent)("el-dialog");return Object(n.openBlock)(),Object(n.createBlock)(x,{title:u.titleMap[u.mode],modelValue:u.visible,"onUpdate:modelValue":t[12]||(t[12]=function(e){return u.visible=e}),width:700,"destroy-on-close":"",onClosed:t[13]||(t[13]=function(t){return e.$emit("closed")})},{footer:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{onClick:t[10]||(t[10]=function(e){return u.visible=!1})},{default:Object(n.withCtx)((function(){return[c]})),_:1}),Object(n.createVNode)(b,{type:"primary",loading:u.isSaveing,onClick:t[11]||(t[11]=function(e){return s.submit()})},{default:Object(n.withCtx)((function(){return[i]})),_:1},8,["loading"])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(V,{model:u.form,rules:u.rules,ref:"dialogForm","label-width":"110px"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(_,{modelValue:u.activeName,"onUpdate:modelValue":t[9]||(t[9]=function(e){return u.activeName=e})},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(j,{label:"基础信息",name:"base"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"应用分组",prop:"group_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(p,{modelValue:u.form.group_id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.form.group_id=e}),style:{width:"100%"},filterable:"",clearable:"",placeholder:"请选择应用分组"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(u.groupData,(function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(d,{key:t,value:e.id,label:e.name},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(m,{label:"应用名称",prop:"app_name"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{modelValue:u.form.app_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.form.app_name=e}),clearable:"",placeholder:"请输入应用名称"},null,8,["modelValue"])]})),_:1}),Object(n.createVNode)(m,{label:"APP ID",prop:"app_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{modelValue:u.form.app_id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return u.form.app_id=e}),clearable:"",disabled:!0,placeholder:"请输入APP ID"},Object(n.createSlots)({_:2},["add"===u.mode?{name:"append",fn:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{type:"primary",icon:"el-icon-refresh",onClick:t[2]||(t[2]=function(e){return s.setAppid()})},{default:Object(n.withCtx)((function(){return[a]})),_:1})]}))}:void 0]),1032,["modelValue"])]})),_:1}),Object(n.createVNode)(m,{label:"APP SECRET",prop:"app_secret"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{modelValue:u.form.app_secret,"onUpdate:modelValue":t[5]||(t[5]=function(e){return u.form.app_secret=e}),clearable:"",disabled:!0,placeholder:"请输入APP SECRET"},{append:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{type:"primary",icon:"el-icon-refresh",onClick:t[4]||(t[4]=function(e){return s.setAppsecret()})},{default:Object(n.withCtx)((function(){return[o]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(m,{label:"状态",prop:"status"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(g,{modelValue:u.form.status,"onUpdate:modelValue":t[6]||(t[6]=function(e){return u.form.status=e})},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(u.data_status_data,(function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(h,{key:t,label:e.value},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.label),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(n.createVNode)(j,{label:"其他信息",name:"other"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(m,{label:"应用介绍",prop:"description"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(O,{modelValue:u.form.description,"onUpdate:modelValue":t[7]||(t[7]=function(e){return u.form.description=e}),placeholder:"请输入应用介绍",height:260},null,8,["modelValue"])]})),_:1}),Object(n.createVNode)(m,{label:"备注",prop:"remark"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(f,{modelValue:u.form.remark,"onUpdate:modelValue":t[8]||(t[8]=function(e){return u.form.remark=e}),type:"textarea",rows:3,clearable:"",placeholder:"请输入备注"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue"])}]]);t.default=d}}]);